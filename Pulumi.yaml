name: copilot-programs
runtime: nodejs
description: Ubuntu EC2 with SSH in a minimal VPC (AWS us-west-2)
config:
  pulumi:tags:
    value:
      pulumi:template: https://api.pulumi.com/api/ai/chat/conversations/atrakic/atrakic/0d50a9db-db3e-4365-a39f-131895a98b82/programs/9cR7ouW.zip
  
  # Production Infrastructure Configuration
  aws-server:projectName: "ubuntu-ssh"
  aws-server:environment: "prod"
  aws-server:instanceType: "t3.medium"  # Larger instance for production
  aws-server:availabilityZones: 3        # Multi-AZ for high availability
  aws-server:enableNatGateway: true      # NAT gateway for private subnets
  
  # Production Security Configuration - Very restrictive
  aws-server:allowedCidrBlocks: "203.0.113.0/24"  # Your office/VPN IP range - CHANGE THIS!
  aws-server:enableSshPasswordAuth: false
  aws-server:sshPort: 2222  # Non-standard SSH port
  
  # SSH Key Configuration for production
  aws-server:createKeyPair: true
  aws-server:publicKeyMaterial: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIYourProductionPublicKeyGoesHere user@production"
  
  # Production Instance Configuration
  aws-server:ubuntuVersion: "22.04"
  aws-server:enablePublicIp: false  # Private instance behind load balancer
  aws-server:cloudInitFile: "cloud-init-prod.yaml"
  
  # Production services ports
  aws-server:additionalPorts: "443,8080"  # Only HTTPS and app port
